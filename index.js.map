{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `\n    <a href=\"${largeImageURL}\" class=\"gallery__item\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery__image\" />\n    <div class=\"info\">\n  <p class=\"info-item\"><b>Likes</b> ${likes}</p>\n  <p class=\"info-item\"><b>Views</b> ${views}</p>\n  <p class=\"info-item\"><b>Comments</b> ${comments}</p>\n  <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\n  </div>\n  </a>\n  `\n  }","import axios from 'axios';\n\naxios.defaults.baseURL = `https://pixabay.com/api/`;\n\nexport const fetchPhotos = (userSerch, page) => {\n    const axiosOptions = {\n        params: {\n            key: \"45517792-9e921d102392e39380fbae016\",\n            q: userSerch,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: \"true\",\n            page: page,\n            per_page: 15,\n        },\n    };\n    return axios.get(``, axiosOptions);\n\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nimport { createGalleryCardTemplate } from \"./js/render-functions.js\";\nimport { fetchPhotos } from \"./js/pixabay-api.js\"\n\n\nconst searchFormEl = document.querySelector(`.js-search-form`);\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtnEl = document.querySelector(`.js-load-more`);\n\nconst loadingIndicatorEl = document.createElement('div');\n\nloadingIndicatorEl.classList.add('loading-indicator', 'hidden');\ndocument.body.appendChild(loadingIndicatorEl);\nlet currentPage = 1;\nlet searchedValue = '';\nlet cardHeight = 0;\n\n\n\nfunction showLoadingIndicator() {\n    loadingIndicatorEl.classList.remove('hidden');\n}\nfunction hideLoadingIndicator() {\n    loadingIndicatorEl.classList.add('hidden');\n}\n\n\nconst onSearchFormSubmit = async event => {\n    try {\n        event.preventDefault();\n\n        searchedValue = searchFormEl.elements.user_query.value.trim();\n        showLoadingIndicator();\n        currentPage = 1;\n        const response = await fetchPhotos(searchedValue, currentPage);\n\n        if (response.data.total === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            loadMoreBtnEl.classList.add('is-hidden');\n\n            galleryEl.innerHTML = '';\n            searchFormEl.reset();\n            hideLoadingIndicator();\n            return;\n        }\n\n        const galleryCardsTemplate = response.data.hits.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n\n        galleryEl.innerHTML = galleryCardsTemplate;\n        const galleryCardEl = galleryEl.querySelector('a');\n\n        cardHeight = galleryCardEl.getBoundingClientRect().height;\n\n        loadMoreBtnEl.classList.remove('is-hidden');\n\n\n        const lightbox = new SimpleLightbox('.js-gallery a', {\n            captions: true,\n            captionsData: 'alt',\n            captionPosition: 'bottom',\n            captionDelay: 250,\n            overlayOpacity: 0.7,\n        });\n\n        lightbox.refresh();\n\n    } catch (err) {\n        console.log(err);\n    }\n    finally {\n        hideLoadingIndicator();\n        searchFormEl.reset();\n    };\n};\nconst onLoadMoreBtnClick = async event => {\n    try {\n        currentPage++;\n\n        const response = await fetchPhotos(searchedValue, currentPage);\n\n        const galleryCardsTemplate = response.data.hits\n            .map(imgDetails => createGalleryCardTemplate(imgDetails))\n            .join('');\n\n        galleryEl.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n\n        const lightbox = new SimpleLightbox('.js-gallery a', {\n            captions: true,\n            captionsData: 'alt',\n            captionPosition: 'bottom',\n            captionDelay: 250,\n            overlayOpacity: 0.7,\n        });\n\n        lightbox.refresh();\n\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n\n        const totalPages = Math.ceil(response.data.totalHits / response.data.hits.length);\n        if (currentPage >= totalPages) {\n            loadMoreBtnEl.classList.add('is-hidden');\n            iziToast.error({\n                message: 'We are sorry, but you have reached the end of search results.',\n                position: 'topRight',\n            });\n        }\n    } catch (err) {\n        console.log(err);\n    }\n\n};\n\n\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);"],"names":["createGalleryCardTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","axios","fetchPhotos","userSerch","page","axiosOptions","searchFormEl","galleryEl","loadMoreBtnEl","loadingIndicatorEl","currentPage","searchedValue","cardHeight","showLoadingIndicator","hideLoadingIndicator","onSearchFormSubmit","event","response","iziToast","galleryCardsTemplate","imgDetails","SimpleLightbox","err","onLoadMoreBtnClick","totalPages"],"mappings":"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"}